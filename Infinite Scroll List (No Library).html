<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infinite Scroll List</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom right, #1e3a8a, #3b82f6, #8b5cf6);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .wrapper {
      max-width: 700px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 3rem;
      margin-bottom: 12px;
      font-weight: 700;
    }

    .header p {
      font-size: 1.1rem;
      opacity: 0.95;
    }

    .counter {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 12px 24px;
      border-radius: 30px;
      display: inline-block;
      margin-top: 16px;
      font-weight: 600;
    }

    .list {
      background: white;
      border-radius: 16px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
      overflow: hidden;
    }

    .list-item {
      padding: 24px;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      gap: 20px;
      align-items: flex-start;
      transition: all 0.2s ease;
      opacity: 0;
      animation: fadeInUp 0.4s ease forwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .list-item:hover {
      background: #f8fafc;
    }

    .list-item:last-child {
      border-bottom: none;
    }

    .item-icon {
      width: 56px;
      height: 56px;
      border-radius: 12px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: white;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .item-details {
      flex: 1;
      min-width: 0;
    }

    .item-name {
      font-size: 1.15rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 6px;
    }

    .item-text {
      color: #6b7280;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .item-badge {
      background: #dbeafe;
      color: #1e40af;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      display: inline-block;
      margin-top: 8px;
    }

    .loader {
      padding: 48px;
      text-align: center;
      display: none;
    }

    .loader.active {
      display: block;
    }

    .spinner {
      width: 48px;
      height: 48px;
      border: 5px solid #e5e7eb;
      border-top-color: #3b82f6;
      border-radius: 50%;
      animation: rotate 0.8s linear infinite;
      margin: 0 auto 16px;
    }

    @keyframes rotate {
      100% { transform: rotate(360deg); }
    }

    .loader-text {
      color: #6b7280;
      font-size: 1rem;
      font-weight: 500;
    }

    .end-notice {
      padding: 48px;
      text-align: center;
      background: linear-gradient(to right, #fef3c7, #fde68a);
      display: none;
    }

    .end-notice.active {
      display: block;
    }

    .end-notice .emoji {
      font-size: 3rem;
      margin-bottom: 16px;
    }

    .end-notice p {
      color: #92400e;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0;
      height: 3px;
      background: linear-gradient(to right, #3b82f6, #8b5cf6);
      transition: width 0.15s ease;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <div class="progress-bar" id="progressBar"></div>

  <div class="wrapper">
    <div class="header">
      <h1>‚ôæÔ∏è</h1>
      <p>Infinite Scroll Demo</p>
      <div class="counter">
        <span id="itemCount">0</span> items loaded
      </div>
    </div>

    <div class="list" id="itemList"></div>

    <div class="loader" id="loader">
      <div class="spinner"></div>
      <div class="loader-text">Loading more items...</div>
    </div>

    <div class="end-notice" id="endNotice">
      <div class="emoji">üéä</div>
      <p>That's everything! No more items to load.</p>
    </div>
  </div>

  <script>
    // Application state
    const app = {
      page: 0,
      perPage: 12,
      maxItems: 100,
      isLoading: false,
      hasMoreItems: true,
      totalLoaded: 0
    };

    // DOM references
    const els = {
      list: document.getElementById('itemList'),
      loader: document.getElementById('loader'),
      endNotice: document.getElementById('endNotice'),
      itemCount: document.getElementById('itemCount'),
      progressBar: document.getElementById('progressBar')
    };

    // Data generator
    function createItem(num) {
      const types = ['Project', 'Task', 'Document', 'Report', 'Meeting', 'Event'];
      const statuses = ['Active', 'Pending', 'Review', 'Complete', 'Draft', 'Archived'];
      
      return {
        id: num,
        type: types[num % types.length],
        status: statuses[num % statuses.length],
        title: `${types[num % types.length]} Item #${num}`,
        description: `This is the detailed description for item number ${num}. Each item has unique content and identifier.`
      };
    }

    // Render single item
    function renderItem(data) {
      const item = document.createElement('div');
      item.className = 'list-item';
      item.innerHTML = `
        <div class="item-icon">${data.id}</div>
        <div class="item-details">
          <div class="item-name">${data.title}</div>
          <div class="item-text">${data.description}</div>
          <span class="item-badge">${data.status}</span>
        </div>
      `;
      return item;
    }

    // Load new batch of items
    async function loadItems() {
      if (app.isLoading || !app.hasMoreItems) return;

      app.isLoading = true;
      els.loader.classList.add('active');

      // Simulate network delay
      await new Promise(r => setTimeout(r, 1000));

      const itemsLeft = app.maxItems - app.totalLoaded;
      const itemsToLoad = Math.min(app.perPage, itemsLeft);

      if (itemsToLoad > 0) {
        const start = app.page * app.perPage + 1;
        const fragment = document.createDocumentFragment();

        for (let i = 0; i < itemsToLoad; i++) {
          const itemData = createItem(start + i);
          fragment.appendChild(renderItem(itemData));
        }

        els.list.appendChild(fragment);
        app.page++;
        app.totalLoaded += itemsToLoad;
        els.itemCount.textContent = app.totalLoaded;
      }

      if (app.totalLoaded >= app.maxItems) {
        app.hasMoreItems = false;
        els.endNotice.classList.add('active');
      }

      els.loader.classList.remove('active');
      app.isLoading = false;
    }

    // Scroll detection
    function handleScroll() {
      const scrollTop = window.scrollY;
      const windowHeight = window.innerHeight;
      const docHeight = document.documentElement.scrollHeight;

      // Update progress bar
      const progress = (scrollTop / (docHeight - windowHeight)) * 100;
      els.progressBar.style.width = `${Math.min(progress, 100)}%`;

      // Check if near bottom (200px threshold)
      const distanceToBottom = docHeight - (scrollTop + windowHeight);
      
      if (distanceToBottom < 200) {
        loadItems();
      }
    }

    // Throttle scroll events
    let scrollTimer;
    window.addEventListener('scroll', () => {
      if (scrollTimer) return;
      scrollTimer = setTimeout(() => {
        handleScroll();
        scrollTimer = null;
      }, 150);
    });

    // Initial load
    loadItems();
  </script>
</body>
</html>